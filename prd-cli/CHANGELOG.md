# 变更日志 (CHANGELOG)

## [1.1.7] - 2025-12-19

### ✨ 新增 - AI 规则文件配置

**解决问题**：AI 在不同 IDE（Cursor、Antigravity、Claude 等）中经常"忘记"工作流规则

- **创建 IDE 专用规则文件**
  - 新增 `.cursorrules` - Cursor IDE 自动读取
  - 新增 `.antigravity/rules.md` - Antigravity (Gemini) 专用
  - 新增 `AI-GUIDE.md` - 所有 IDE 通用指引

- **规则文件内容**
  - 核心原则：PM 决策，AI 执行
  - 5 大禁止行为（未经对话填充、替 PM 决策、假设意图等）
  - 5 大必须行为（检查前置、提问引导、分段确认、战略分析、归档对话）
  - 具体场景的正确反应示例
  - 归档要求和自我检查清单

### 🔧 优化

- **项目初始化增强**
  - `prd init` 时自动复制 `.cursorrules` 到新项目
  - `prd init` 时自动复制 `.antigravity/` 到新项目
  - `prd init` 时自动复制 `AI-GUIDE.md` 到新项目
  - 新项目开箱即用，AI 自动遵守规则

### 📝 文档

- 新增《AI 规则文件配置说明》
- 说明不同 IDE 的规则文件路径
- 提供规则文件使用指南

### 核心价值

- ✅ **规则持久化**：AI 不会"忘记"工作流规则
- ✅ **跨 IDE 一致性**：Cursor、Antigravity 等都遵守相同规则
- ✅ **自动加载**：不同 IDE 自动读取对应的规则文件
- ✅ **新项目即用**：`prd init` 时自动包含所有规则

---

## [1.1.6] - 2025-12-19

### ✨ 新增 - 对话归档机制完善

- **创建归档模板**
  - 新增 `templates/dialog-template.md` 标准归档模板
  - 提供统一的 Markdown 格式规范

- **工作流增加归档要求**
  - B1 工作流增加 Step 5：归档对话（每完成一个部分立即归档）
  - B2 工作流增加 Step 6：归档对话（每完成一轮分析立即归档）
  - C1 工作流增加 Step 6：归档对话（每完成一个需求立即归档）

- **项目初始化自动复制模板**
  - `prd init` 时自动复制归档模板到 `98_对话归档/`
  - 新项目开箱即用

### 🔧 优化

- **AI 行为检查清单增强**
  - 增加归档检查项（每完成一个部分都要归档）
  - 增加归档承诺（5 项明确承诺）
  - 增加归档位置规范
  - 增加归档检查清单

### 📝 文档

- 新增《对话归档机制修复方案》
- 新增《对话归档机制修复完成报告》
- 新增《对话归档机制修复最终总结》
- 新增《所有工作流归档要求增加完成报告》

### 核心价值

- ✅ **对话可追溯**：PM 和 AI 在 IDE 中的对话都被完整记录
- ✅ **决策有依据**：PM 的决策过程和理由都有记录
- ✅ **过程可重现**：后续可以查看当时的讨论详情
- ✅ **质量有保证**：AI 的战略分析过程被完整保留

---

## [1.1.4] - 2025-12-19

### 🔧 修复
- **修复 B1/B2/C1 文档填写流程控制问题**
  - 禁止 AI 在未与 PM 对话的情况下填充文档内容
  - AI 必须通过对话引导 PM 提供信息
  - AI 必须分段确认后才写入
  - 禁止 AI 替 PM 做决策（如优先级、范围等）

### ✨ 新增
- **B1 创建时的强制启动检查**
  - 检测到 B1 创建后，AI 必须开始对话引导
  - 明确 AI 行为红线（禁止自动填充、假设意图等）
  - 提供正确/错误示例

- **B2 创建时的强制启动检查**
  - AI 必须引导 PM 用 MECE 原则拆解需求
  - AI 必须让 PM 决定优先级和首版范围
  
- **C1 创建时的强制启动检查**
  - AI 必须逐项询问需求的 8 个维度
  - AI 必须完整记录所有细节

### 📝 文档
- 新增《B1/B2/C1 文档填写流程修复报告》
- 更新文档填写工作流，增加强制启动检查

---

## [1.1.3] - 2025-12-19

### 🔧 修复
- **修复 R0 创建流程控制问题**
  - 增加 R0 创建前的强制检查机制
  - AI 必须检查 P0、A0、A1 是否完成后才能创建 R0
  - AI 必须与 PM 确认后才能建议执行创建命令
  - 禁止 AI 自动执行 `prd baseline create R0` 命令

### ✨ 新增
- 增加 R0 创建前的前置条件检查流程
- 增加 R0 创建时的 PM 确认流程
- 明确定义 AI 在 R0 创建过程中的行为红线

### 📝 文档
- 新增《R0 创建流程修复报告》，详细说明问题和解决方案
- 更新 R0 基线审视工作流文档

---

## [1.1.2] - 2025-12-19

### ✨ 新增
- 新增 P0 项目基本信息填写工作流文档 (`prd-p0-project-info.md`)
- 新增 P0 填写的详细引导和 AI 对话示例

### 🔧 优化
- **优化项目初始化提示**：增加明确的分步指引，强调先完善 P0 再创建 A0
  - 第 1 步：进入项目目录
  - 第 2 步：完善 P0_项目基本信息.md（⚠️ 必填）
  - 第 3 步：创建 A0 基线文档
  
- **更新文档填写工作流**：在 `prd-document-filling.md` 开头增加 P0 前置要求说明
  - 明确 P0 必须在 B/C 类文档之前完成
  - 提供 AI 检测 P0 未完成时的提醒模板

### 📝 文档
- 新增《P0 填写流程修复报告》，详细说明问题和解决方案

### 🐛 修复
- 修复用户初始化项目后跳过 P0 直接创建 A0 的问题
- 修复工作流文档中缺少 P0 填写指引的问题

---

## [1.1.1] - 2025-12-18

### ✨ 新增
- 完整的 C2 变更追踪机制
- P1 迭代索引自动生成功能
- R0 基线审视的 AI 主动审查模式
- PM 确认机制优化

### 🔧 优化
- Git 提交行为改进：需要显式确认
- 对话归档流程优化

---

## [1.1.0] - 2025-12-17

### ✨ 新增
- 完整的 A→R→B→C 工作流
- 基线管理功能
- 迭代管理功能
- 审视机制（R0/R1/R2）
- 对话归档功能

### 📝 文档
- 完整的工作流文档
- GUIDE.md 使用指南
- README.md 项目说明

---

## 版本说明

- **主版本号（1.x.x）**：重大功能变更或不兼容更新
- **次版本号（x.1.x）**：新功能添加，向后兼容
- **修订版本号（x.x.2）**：Bug 修复和小优化
