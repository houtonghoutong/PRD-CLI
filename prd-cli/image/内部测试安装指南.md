# PRD CLI 工具 - 内部测试安装指南

## 📦 安装包信息

- **包名**: prd-workflow-cli
- **版本**: 1.0.0
- **文件**: `prd-workflow-cli-1.0.0.tgz`
- **大小**: 25.2 KB (解压后 98.7 KB)

---

## 🚀 快速安装

### 方式一：从 .tgz 文件安装（推荐）

**步骤：**

1. 获取安装包文件 `prd-workflow-cli-1.0.0.tgz`

2. 打开终端，执行安装命令：
```bash
npm install -g /path/to/prd-workflow-cli-1.0.0.tgz
```

3. 验证安装：
```bash
prd --version
# 应显示：1.0.0

prd --help
# 显示帮助信息
```

### 方式二：从源码目录直接安装

如果可以访问源码目录：
```bash
cd /Users/hou/Documents/UGit/PRD\ CLI/prd-cli
npm install -g .
```

---

## ✅ 安装验证

安装成功后，执行以下命令测试：

```bash
# 1. 查看版本
prd --version

# 2. 查看帮助
prd --help

# 3. 创建测试项目
cd ~/Desktop
prd init 测试项目
cd 测试项目

# 4. 查看项目状态
prd status
```

---

## 🆕 新增功能亮点

### 1. PM 确认机制
在关键决策点会要求 PM 交互确认，防止 AI 越权：
- ✅ B1 创建前：PM 确认 R1 三个启动条件
- ✅ R1 审视前：PM 确认角色分工
- ✅ B3 冻结前：PM 签名确认
- ✅ R2 审视前：PM 确认角色分工
- ✅ C3 冻结前：PM 签名确认

### 2. 对话归档
所有 PM 决策和 AI 建议自动归档到 `98_对话归档/` 目录：
- JSONL 格式（机器可读）
- Markdown 格式（人类可读）
- 完全可追溯

### 3. 权责明确提示
每个命令执行时会显示：
- 【PM 职责】- 应由 PM 完成的工作
- 【AI 职责】- AI 可以辅助的工作
- 【AI 禁止】- AI 不应越权的边界

---

## 📝 测试重点

请重点测试以下场景：

### 场景 1: 完整流程体验
```bash
prd init 新项目测试
cd 新项目测试
prd baseline create A0
prd iteration new
prd plan create B1  # 注意：会要求PM确认！
prd review r1       # 注意：会要求PM确认！
prd plan freeze     # 注意：需要PM签名！
```

### 场景 2: PM 确认机制
测试在创建 B1 时：
- 是否弹出 R1 启动条件确认？
- 三个条件是否必须全部确认？
- 拒绝后是否停止创建？

### 场景 3: 对话归档
- 检查 `98_对话归档/` 目录
- 查看是否有 `.jsonl` 和 `.md` 文件
- 确认决策记录是否完整

---

## 🐛 已知问题及注意事项

### 注意事项
1. **Node.js 版本要求**: >= 14.0.0
2. **首次运行**: 建议先在测试目录操作，不要直接在生产项目
3. **权限问题**: 如果遇到权限错误，使用 `sudo` 安装

### 常见问题

**Q: 命令找不到？**
```bash
# 检查全局安装路径
npm root -g

# 重新链接
npm link
```

**Q: 权限错误？**
```bash
# macOS/Linux
sudo npm install -g prd-workflow-cli-1.0.0.tgz

# 或配置 npm 全局目录（推荐）
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
export PATH=~/.npm-global/bin:$PATH
```

**Q: 如何卸载？**
```bash
npm uninstall -g prd-workflow-cli
```

**Q: 如何更新？**
```bash
# 先卸载旧版本
npm uninstall -g prd-workflow-cli

# 再安装新版本
npm install -g /path/to/prd-workflow-cli-新版本.tgz
```

---

## 📋 反馈收集

测试时请关注并反馈：

### 功能测试
- [ ] 项目初始化是否正常
- [ ] PM 确认提示是否清晰
- [ ] 对话归档是否生成
- [ ] 权责说明是否有帮助
- [ ] 文档模板内容是否合理

### 用户体验
- [ ] 提示信息是否友好
- [ ] 操作流程是否流畅
- [ ] 错误提示是否清晰
- [ ] 帮助文档是否完整

### 性能问题
- [ ] 命令响应速度
- [ ] 文件生成速度
- [ ] 大量对话时归档性能

---

## 📞 技术支持

**安装包位置**: `/Users/hou/Documents/UGit/PRD CLI/prd-cli/prd-workflow-cli-1.0.0.tgz`

**源码位置**: `/Users/hou/Documents/UGit/PRD CLI/prd-cli/`

**核心文档**:
- `/Users/hou/Documents/UGit/PRD CLI/prd-cli/README.md` - 使用说明
- `/Users/hou/Documents/UGit/PRD CLI/prd-cli/GUIDE.md` - 详细指南
- `/Users/hou/Documents/UGit/PRD CLI/prd-cli/权责划分修复报告.md` - 权责机制说明

---

## 🎯 测试目标

通过本次内部测试，我们希望验证：

1. ✅ PM 确认机制能有效防止 AI 越权
2. ✅ 对话归档功能完整可用
3. ✅ 权责划分提示清晰有效
4. ✅ 整体流程符合产品需求管理规范
5. ✅ 工具稳定性和易用性

---

**测试愉快！有任何问题随时反馈！** 🚀

---
生成时间: ${new Date().toLocaleString('zh-CN')}
