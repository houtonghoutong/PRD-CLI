---
description: C1 版本需求清单填写工作流
---

# C1 版本需求清单填写工作流

**核心原则**：忠实于 B3，不新增范围 + 完整记录所有细节。C1 是 AODW 的输入源！

---

## 🚨 C1 创建时的强制启动检查

**⚠️ AI 绝对禁止在未与 PM 对话的情况下填充 C1 内容！**

### 当检测到 C1 文档被创建时

**AI 必须执行以下流程：**

```
AI: "✅ C1_版本需求清单.md 已创建。

     在填写 C1 之前，我需要确认并细化每个需求。
     
     🚨 重要原则：
     - C1 只能包含 B3 冻结的首版范围
     - AI 必须逐项询问需求细节
     - 禁止省略细节或边界情况
     - 必须完整记录 PM 说的所有内容
     
     首先，让我确认 B3 首版包含的需求项...
     
     [读取 B3 首版范围]
     
     确认 C1 将基于这些需求展开，不会新增。对吗？"
```

---

## AI 行为红线（C1 创建时）

**AI 在 C1 创建后绝对禁止：**

1. ❌ **未经对话就填充需求细节**
   - 禁止直接写需求描述、验收标准等
   - 必须逐项询问 PM
   
2. ❌ **省略或简化需求细节**
   - 不能只写标题和简单描述
   - 必须包含 8 个维度的完整信息
   
3. ❌ **新增 B3 范围外的需求**
   - 必须严格映射 B3 首版需求
   - 发现新增需求时必须提醒 PM

4. ❌ **不记录 PM 的特殊说明**
   - PM 的强调和注意事项必须全部记录
   - 不能遗漏任何细节

5. ❌ **允许 PM 跳过必填内容（重要！）**
   - **禁止接受"跳过"、"先不填"、"之后再说"等请求**
   - 必须坚持完成必填内容后才能进入下一项

**AI 必须做到：**

1. ✅ 严格检查 C1 与 B3 的映射关系
2. ✅ 逐项询问需求的 8 个维度
3. ✅ 完整记录所有细节（背景/规则/边界/性能...）
4. ✅ 分段确认后才写入
5. ✅ **拒绝跳过必填内容**

---

## 🚨 禁止跳过必填内容（关键规则！）

### 问题背景

PM 在填写 C1 时，可能会说：
- "这个跳过吧"
- "先不填，之后再说"
- "这个我不太清楚，跳过"
- "太细了，不需要"

**如果 AI 允许跳过，会导致：**
- 需求文档不完整
- 研发无法执行
- 交付后反复返工
- 用户不满意

### AI 必须拒绝跳过的必填内容

**C1 的 8 个维度中，以下 5 个是必填的：**

| 维度 | 是否必填 | 不填的后果 |
|-----|---------|-----------|
| 1. 需求背景 | ✅ 必填 | 研发不理解为什么做 |
| 2. 需求描述 | ✅ 必填 | 根本不知道做什么 |
| 3. 业务规则 | ✅ 必填 | 实现逻辑会出错 |
| 4. 验收标准 | ✅ 必填 | 无法判断是否完成 |
| 5. 边界情况 | ✅ 必填 | 异常处理会遗漏 |
| 6. 非功能需求 | ⚠️ 视情况 | 性能问题可后补 |
| 7. 特殊说明 | ⚠️ 视情况 | 可以没有 |
| 8. 附加信息 | ⚠️ 视情况 | 可以简化 |

### AI 拒绝跳过的对话示例

```
PM: "验收标准这个跳过吧，太细了"

❌ 错误的 AI 反应：
AI: "好的，跳过验收标准，继续下一项..."

✅ 正确的 AI 反应：
AI: "⚠️ 验收标准是必填项，不能跳过。

     原因：
     1. 没有验收标准，无法判断需求是否完成
     2. 研发和测试会反复问'这个算完成吗？'
     3. 上线后可能因理解不一致产生争议
     
     验收标准不需要很复杂，只需要回答：
     - 做到什么程度算'完成'？
     - 用什么方法可以验证？
     
     请给出至少 2-3 条验收标准。"
```

```
PM: "边界情况我不太清楚，先跳过"

✅ 正确的 AI 反应：
AI: "⚠️ 边界情况是必填项，不能跳过。

     我理解您可能还没想清楚，让我帮您梳理。
     
     常见的边界情况包括：
     1. 网络断开时怎么办？
     2. 数据为空或异常时怎么处理？
     3. 用户快速重复操作时怎么办？
     4. 没有权限时怎么提示？
     
     请针对这个需求，逐个告诉我您的预期。
     如果某一项确实不适用，可以标注'不适用'并说明原因。"
```

```
PM: "这个需求背景很明显，不用写了吧"

✅ 正确的 AI 反应：
AI: "⚠️ 需求背景是必填项。

     虽然您觉得'很明显'，但研发和测试可能不清楚：
     - 这个需求解决什么问题？
     - 为什么现在要做？
     - A2 中对应哪条用户反馈？
     
     请用 1-2 句话说明背景，我来记录。"
```

### PM 坚持要跳过时的处理

**如果 PM 多次坚持要跳过必填内容：**

```
PM: "我说了跳过，你就跳过！"

AI: "⚠️ 我理解您希望加快进度，但必填内容缺失会导致严重问题。

     ❌ 如果现在跳过：
     - 研发可能做错（没有明确规则）
     - 测试无法验收（没有验收标准）
     - 上线后可能返工（用户不满意）
     
     ✅ 两个选择：
     1. 花 2 分钟快速说明，我帮您记录
     2. 暂停 C1，先确认需求细节后再继续
     
     请选择。
     
     注意：跳过必填内容会在 R2 审视时被标记为'不通过'。"
```

### 记录跳过行为

**如果 PM 最终坚持跳过，AI 必须：**

1. **在文档中标注缺失**
   ```markdown
   ### 验收标准
   
   ⚠️ **待补充** - PM 要求暂时跳过
   - [ ] 需要在 R2 审视前补充完整
   ```

2. **在汇总中警告**
   ```
   AI: "⚠️ 警告：C1 有 2 处必填内容缺失：
        - 需求 #3：验收标准（必填）
        - 需求 #5：边界情况（必填）
        
        这会导致 R2 审视不通过。
        请在提交 R2 之前补充。"
   ```

3. **在 R2 审视时严格扣分**
   - 每缺失一个必填维度，需求粒度成熟度扣 20%

---

## C1 的本质：忠实于 B3，不新增范围 + 完整记录所有细节

### ⚠️ 关键原则：C1 是 AODW 的输入源

**C1 必须记录 PM 说的所有内容，包括：**
- 需求的背景和原因
- 业务规则和约束
- 边界情况和异常处理
- PM 的特殊说明和强调
- 实现时的注意事项

**如果 C1 丢失细节，后续 AODW 会出现需求理解偏差！**

---

## Step 1: 严格映射检查

**AI 的第一个问题（必须问）**：

```
AI: "在填写 C1 之前，我需要确认：
     
     C1 只能包含 B3 首版范围内的需求项。
     
     让我先列出 B3 的首版需求：
     [列出 B3 的首版需求]
     
     C1 将基于这些需求展开，不会新增。确认吗？"
```

### AI 必须拒绝新增

```
PM: "对了，还想加一个批量启动功能..."

AI: "⚠️ 请注意：
     
     '批量启动'在 B3 的规划范围内吗？
     
     [检查 B3]
     
     我检查了 B3，没有找到'批量启动'。
     
     根据规范，C 阶段禁止新增规划外需求。
     
     请选择：
     1. 📝 暂存到 A2（推荐）- 保存到下一轮迭代
     2. 🔄 解冻 B3 - 重新审视后再冻结
     
     您选择哪个？"
```

---

## 🔴 关键规则：超范围需求的处理（新增需求暂存机制）

**当 C1 讨论中产生新需求但不属于当前版本时，必须严格执行以下流程：**

### 🚨 AI 强制行为

**当 PM 提出新需求时，AI 必须：**

1. **立即检查 B3 范围**
2. **如果超出范围，明确告知：此需求不能加入本次迭代**
3. **给出唯一选择：暂存到 A2（等待下一轮迭代）**
4. **或者解冻 B3 重新规划（这是一个重大决策）**

### ❌ 极其错误的 AI 行为

```
AI: "这是新需求。需要加入本次迭代还是放到下一迭代？"
```

**这是绝对禁止的！**

**原因**：C1 阶段只能基于 B3 冻结的内容，**根本不存在"加入本次迭代"的选项**！

### ✅ 正确的 AI 行为

```
PM: "对了，还需要一个 BP 看板来显示超时待办"

AI: "⚠️ 范围检查：
     
     'BP 看板显示超时待办' 不在 B3 首版范围内。
     
     ❌ 根据规范，C1 阶段不能新增需求到本次迭代。
     
     您有两个选择：
     
     1. 📝 暂存到 A2（推荐）
        - 记录到 A2 的"待下版事项"
        - 下一轮迭代时纳入 B1 规划
        - 当前版本继续按 B3 执行
     
     2. 🔄 解冻 B3，重新规划（谨慎）
        - 需要重新执行 R1 审视
        - 整个规划周期重来
        - 仅限于发现重大遗漏时使用
     
     请选择处理方式。"
```

### 暂存到 A2 的执行流程

```
PM: "暂存到 A2 吧"

AI: "好的，我将此需求记录到 A2。
     
     📝 写入位置：01_产品基线/A2_存量反馈与数据汇总.md
     📍 章节：五、待下版事项
     
     内容：
     ---
     ### 待下版事项：BP 看板显示超时待办
     - **来源**：C1 讨论过程（当前第 01 轮迭代）
     - **原因**：超出 B3 首版范围，延后处理
     - **优先级**：[待定]
     - **详细描述**：[PM 的需求描述]
     - **记录时间**：[当前时间]
     ---
     
     ✅ 已写入 A2。此需求将在下一轮迭代时纳入 B1 规划。
     
     现在继续 C1 当前版本的需求讨论。"
```

### A2 暂存的记录格式

**AI 必须按以下格式写入 A2：**

```markdown
## 四、已知未解决事项

### 待下版事项 #1：批量导入功能

**来源**：C1 讨论过程（第 01 轮迭代，2025-12-22）
**原因**：超出 B3 首版范围

**优先级**：
- [ ] P0 - 紧急
- [x] P1 - 重要
- [ ] P2 - 一般

**详细描述**：
用户需要批量导入数据，而不是逐条手动创建。
目前只支持单条创建，批量操作需求来自多个用户反馈。

**PM 补充说明**：
（在 C1 讨论中 PM 的原话）

**关联需求**：
与 REQ-003 数据管理有关

**记录时间**：2025-12-22 15:30
**记录人**：AI 辅助记录
```

### ⚠️ AI 禁止行为

在 C1 讨论中，AI 绝对禁止：

1. ❌ **将超范围需求直接写入 C1**
2. ❌ **忽略新需求不做任何处理**
3. ❌ **让 PM 自己记住下次要做什么**
4. ❌ **只口头说"下次做"但不写入 A2**

### ✅ AI 必须做到

1. ✅ **发现超范围需求立即提醒**
2. ✅ **引导 PM 做出明确选择**
3. ✅ **选择暂存后立即写入 A2**
4. ✅ **写入后确认并继续当前版本讨论**

---

## Step 2: 逐项细化（完整记录所有细节）

**AI 对每个 B3 需求项的处理方式：**

### 2.1 需求背景和目的

```
AI: "B3 需求项 #1：进度指示器
     
     首先，让我了解背景：
     
     1. 为什么需要这个功能？解决什么问题？
     2. 当前用户遇到了什么困难？
     3. 这个需求对应 A2 中的哪些反馈？
     
     请详细说明，我会全部记录到 C1 中。"
```

### 2.2 需求描述（用户视角）

```
AI: "现在描述需求本身：
     
     1. 用户看到的具体表现是什么？
        - 界面上会出现什么？
        - 用户如何与之交互？
     
     2. 操作流程是怎样的？
        - 第一步？
        - 第二步？
        - 最后一步？
     
     请尽可能详细，这些细节会直接影响后续设计和开发。"
```

### 2.3 核心业务规则

```
AI: "这个需求有哪些业务规则？
     
     例如：
     - 什么情况下显示？什么情况下不显示？
     - 数据如何计算？
     - 时间限制？权限限制？
     
     请逐条说明，我会全部记录。"
```

### 2.4 验收标准（可测试）

```
AI: "如何验证这个需求完成了？
     
     请给出可测试的验收标准：
     - 标准 1：具体要达到什么状态
     - 标准 2：如何验证
     - 标准 3：边界条件
     
     避免模糊表述如'体验好''用户满意'。"
```

### 2.5 边界情况和异常处理

```
AI: "现在考虑边界情况：
     
     1. 网络断开时怎么办？
     2. 数据异常（如为空、过大）时怎么处理？
     3. 并发操作时的表现？
     4. 权限不足时？
     
     请说明每种情况的预期行为，我会记录到 C1。"
```

### 2.6 特殊说明和注意事项

```
AI: "还有什么特殊说明吗？
     
     比如：
     - 性能要求（必须在 X 秒内响应）
     - 兼容性要求（支持哪些浏览器/版本）
     - 与其他功能的交互
     - 实现时的特别注意事项
     
     请补充，我会全部记录。"
```

---

## Step 3: 完整记录示例

**AI 写入 C1 的格式应该是：**

```markdown
### 需求 #1：进度指示器

**需求编号**：REQ-001
**来源**：B3 需求项 #1
**优先级**：P0

---

#### 1. 需求背景

**解决的问题**：
用户在创建 BP 时不知道当前进度，经常中途放弃。根据 A2 反馈
#3、#7、#12，用户表示"不知道还要填多少""填到哪一步了"。

**目标**：
让用户清楚知道当前在第几步，还剩几步，减少放弃率。

**数据支撑**：
- 当前创建放弃率 40%
- 期望降至 10% 以下

---

#### 2. 需求描述

**用户视角**：
1. 用户进入 BP 创建流程时，页面顶部显示进度条
2. 进度条显示：当前步骤 / 总步骤数（如"第 2 步，共 5 步"）
3. 已完成步骤显示绿色，当前步骤高亮，未完成步骤灰色
4. 每完成一步，进度条自动前进

**操作流程**：
1. 用户点击"创建 BP"按钮
2. 系统展示进度条（初始：第 1 步，共 5 步）
3. 用户填写第 1 步信息并点击"下一步"
4. 进度条更新为"第 2 步，共 5 步"，第 1 步显示绿色✅
5. 重复直到第 5 步完成

---

#### 3. 核心业务规则

1. **步骤计算规则**：
   - 总步骤数 = 基本信息 + 目标设定 + 关键成果 + 行动计划 + 确认提交 = 5 步
   - 如果用户跳过"关键成果"（选填），总步骤数调整为 4 步

2. **显示规则**：
   - 进度条始终显示在页面顶部固定位置
   - 在移动端缩小为圆形进度环（显示"2/5"）

3. **保存规则**：
   - 进度随自动保存同步更新
   - 用户退出后再进入，进度条恢复到上次位置

---

#### 4. 验收标准

- [ ] **标准 1**：进入创建流程，立即显示进度条"第 1 步，共 5 步"
- [ ] **标准 2**：点击"下一步"，进度条正确更新到"第 2 步"
- [ ] **标准 3**：已完成步骤显示绿色✅，当前步骤高亮，未完成步骤灰色
- [ ] **标准 4**：跳过选填步骤时，总步骤数正确调整
- [ ] **标准 5**：退出后再进入，进度条恢复到上次保存的位置
- [ ] **标准 6**：移动端显示圆形进度环

---

#### 5. 边界情况处理

1. **网络断开**：
   - 进度条显示本地缓存的进度
   - 顶部显示"离线模式"提示

2. **数据异常**：
   - 如果获取不到步骤数，默认显示"进行中..."
   - 不阻塞用户继续操作

3. **并发编辑**：
   - 如果多人同时编辑同一 BP（极少见），以最后保存为准
   - 进度条显示当前用户的进度

4. **权限变更**：
   - 如果创建过程中权限被收回，进度条置灰
   - 显示提示"您已无权限继续创建"

---

#### 6. 非功能需求

**性能要求**：
- 进度条更新必须在 100ms 内完成（用户无感知延迟）

**兼容性要求**：
- 支持 Chrome 90+、Safari 14+、Edge 90+
- 移动端支持 iOS 13+ 和 Android 9+

**无障碍要求**：
- 进度条必须有 ARIA 标签，支持屏幕阅读器

---

#### 7. 特殊说明

**PM 强调**：
- 进度指示器是 CSF（关键成功因素），必须在首版实现
- 设计时参考"飞书文档创建"的进度条样式
- 不要做太炫酷的动画，简洁优先

**与其他功能的关联**：
- 依赖"自动保存"功能（REQ-005）
- 需要与"断点续作"（REQ-003）联动

**技术注意事项**：
- 前端需要状态管理来追踪当前步骤
- 后端需要提供"获取当前进度"API

---

#### 8. 附加信息

**来源追溯**：
- B3 需求项 #1
- A2 用户反馈 #3、#7、#12

**讨论记录**：
- PM 在 2025-12-19 讨论中强调必须支持移动端
- 设计团队建议采用固定顶部方案

---
```

---

## Step 4: 确保完整性 - AI 检查清单

**AI 在写入每个需求前必须检查：**

```
AI: "让我检查需求 #1 的完整性：
     
     ✅ 完整性检查：
     - [ ] 需求背景已记录（为什么要做）
     - [ ] 需求描述已记录（做什么）
     - [ ] 业务规则已记录（怎么做）
     - [ ] 验收标准已记录（如何验证）
     - [ ] 边界情况已记录（异常处理）
     - [ ] 非功能需求已记录（性能/兼容性）
     - [ ] PM 特殊说明已记录（重点/注意事项）
     - [ ] 来源可追溯（到 B3）
     
     缺失项：[列出缺失的]
     
     请补充缺失的信息。"
```

---

## Step 5: 分段写入 C1

**每确认 1 个需求的完整信息，就写入一次：**

```
AI: "需求 #1 的所有细节已确认完整。
     
     我现在写入 C1，包括：
     - 背景和目的
     - 详细描述
     - 业务规则
     - 验收标准
     - 边界情况
     - 非功能需求
     - 您的特殊说明
     
     [执行写入]
     
     已写入。请检查此需求是否完整准确。"

PM: [确认]

AI: "确认。继续细化需求 #2..."
```

---

## ⚠️ AI 绝对禁止在 C1 中

1. ❌ 只写标题和简单描述，丢失 PM 说的细节
2. ❌ 省略业务规则或边界情况
3. ❌ 不记录 PM 的特殊强调
4. ❌ 验收标准太模糊（如"体验好"）
5. ❌ 不记录需求背景和原因

---

## ✅ AI 必须在 C1 中做到

1. ✅ 完整记录 PM 阐述的所有内容
2. ✅ 8 个维度都填写完整（背景/描述/规则/验收/边界/性能/说明/追溯）
3. ✅ 确保后续 AODW 能直接使用这些信息
4. ✅ 每个细节都不遗漏
5. ✅ 结构化整理，而非杂乱的对话记录

---

## Step 6: 归档对话（AI 必须执行）

**⚠️ AI 绝对禁止不归档对话！**

### 归档时机

**每完成 1 个需求的 8 个维度填写，AI 必须立即归档：**

| 完成环节 | 归档内容 |
|---------|---------|
| 需求背景 | PM 的说明、AI 的追问、背景澄清过程 |
| 需求描述 | PM 的详细描述、AI 的总结确认 |
| 业务规则 | PM 列举的规则、AI 的逐条记录 |
| 验收标准 | PM 的标准、AI 的可测试性检查 |
| 边界情况 | PM 对各种情况的说明、AI 的补充提问 |
| 非功能需求 | 性能、兼容性、安全等要求 |
| 特殊说明 | PM 的强调和注意事项（完整保留原话）|
| 附加信息 | 来源追溯、讨论记录 |

### 归档位置

- **基线阶段**：`98_对话归档/C1_对话记录.md`
- **迭代阶段**：`98_对话归档/第01轮迭代/C1_对话记录.md`

### 归档格式

使用模板：`templates/dialog-template.md`

**归档示例**：

```markdown
## 💬 对话 #1

**时间**: 2025-12-19 17:00:00  
**讨论主题**: REQ-001 进度指示器 - 8 个维度细化

### 🤖 AI 询问（维度 1：需求背景）
> B3 需求项 #1：进度指示器
> 
> 首先，让我了解背景：
> 1. 为什么需要这个功能？解决什么问题？
> 2. 当前用户遇到了什么困难？
> 3. 这个需求对应 A2 中的哪些反馈？

### 🧑 PM 回答
> 用户在创建 BP 时不知道当前进度，经常中途放弃。
> A2 反馈 #3、#7、#12 都提到"不知道还要填多少"。
> 当前创建放弃率 40%，期望降至 10% 以下。

### 📝 AI 记录
> 已记录需求背景到 C1

---

### 🤖 AI 询问（维度 2：需求描述）
> 现在描述需求本身：
> 1. 用户看到的具体表现是什么？
> 2. 操作流程是怎样的？

### 🧑 PM 回答
> 页面顶部显示进度条，显示"第 X 步，共 Y 步"。
> 已完成的显示绿色，当前步骤高亮，未完成灰色。
> 用户点击"下一步"时自动前进。
> 移动端显示圆形进度环。

### 📝 AI 记录
> 已记录需求描述到 C1

---

### 🤖 AI 询问（维度 3：业务规则）
> 这个需求有哪些业务规则？

### 🧑 PM 回答
> 总步骤数 = 5 步（基本信息 + 目标 + 成果 + 计划 + 确认）
> 如果跳过选填项，总步骤数调整
> 进度随自动保存同步更新

### 📝 AI 记录
> 已记录业务规则到 C1

---

### 🤖 AI 询问（维度 7：特殊说明）
> PM，还有什么特殊说明吗？

### 🧑 PM 强调
> 这是 CSF，必须首版实现！
> 参考飞书文档创建的进度条样式！
> 不要做太炫酷的动画，简洁优先！

### 📝 AI 记录
> 已完整记录 PM 的 3 个强调到 C1 特殊说明

---

### ✅ 需求完整性检查
> ✅ 8 个维度全部记录完整
> ✅ PM 的原话已保留
> ✅ 所有细节已记录

### 📝 AI 执行
> 已将 REQ-001 的完整信息写入 C1

---
```

### AI 归档检查清单

在写入 C1 每个需求前，AI 必须确认：

- [ ] 已记录 8 个维度的完整讨论过程
- [ ] 已记录 AI 对每个维度的逐项询问
- [ ] 已记录 PM 的完整回答（保留原话）
- [ ] 已记录 PM 的特殊说明和强调
- [ ] 已标注需求编号和时间戳
- [ ] 已写入对话归档文件

---

## 🔄 C1 完成后的下一步

```
AI: "C1_版本需求清单已完成。
     
     统计：
     - 总需求项：[N] 个
     - 已细化：[N] 个
     - 平均完成度：100%
     
     检查清单：
     - [✓] 所有需求都有完整的 8 个维度
     - [✓] 所有验收标准都可测试
     - [✓] 所有边界情况都已说明
     - [✓] PM 的特殊说明都已记录
     
     下一步：
     1. 执行 R2 版本审视
        运行：prd review r2
     
     2. 或者先修改 C1
        如需修改，请告诉我要调整的需求
     
     您选择哪个？"
```

---

## 📋 C1 需求的 8 个维度

为确保完整性，每个需求必须包含：

1. **需求背景** - 为什么要做，解决什么问题
2. **需求描述** - 用户视角的详细说明
3. **业务规则** - 业务逻辑和约束
4. **验收标准** - 可测试的完成标准
5. **边界情况** - 异常处理和特殊场景
6. **非功能需求** - 性能、兼容性、安全等
7. **特殊说明** - PM 强调和注意事项
8. **附加信息** - 来源追溯、讨论记录

---

**记住：C1 是产品需求的最终形态，是交付给后续所有环节（AODW/研发/测试）的唯一依据！**
