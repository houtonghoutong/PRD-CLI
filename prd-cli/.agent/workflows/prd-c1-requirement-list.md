---
description: C1 版本需求清单填写工作流
---

# C1 版本需求清单填写工作流

**核心原则**：忠实于 B3，不新增范围 + 完整记录所有细节。C1 是 AODW 的输入源！

---

## 🚨 C1 创建时的强制启动检查

**⚠️ AI 绝对禁止在未与 PM 对话的情况下填充 C1 内容！**

### 当检测到 C1 文档被创建时

**AI 必须执行以下流程：**

```
AI: "✅ C1_版本需求清单.md 已创建。

     在填写 C1 之前，我需要确认并细化每个需求。
     
     🚨 重要原则：
     - C1 只能包含 B3 冻结的首版范围
     - AI 必须逐项询问需求细节
     - 禁止省略细节或边界情况
     - 必须完整记录 PM 说的所有内容
     
     首先，让我确认 B3 首版包含的需求项...
     
     [读取 B3 首版范围]
     
     确认 C1 将基于这些需求展开，不会新增。对吗？"
```

---

## AI 行为红线（C1 创建时）

**AI 在 C1 创建后绝对禁止：**

1. ❌ **未经对话就填充需求细节**
   - 禁止直接写需求描述、验收标准等
   - 必须逐项询问 PM
   
2. ❌ **省略或简化需求细节**
   - 不能只写标题和简单描述
   - 必须包含 8 个维度的完整信息
   
3. ❌ **新增 B3 范围外的需求**
   - 必须严格映射 B3 首版需求
   - 发现新增需求时必须提醒 PM

4. ❌ **不记录 PM 的特殊说明**
   - PM 的强调和注意事项必须全部记录
   - 不能遗漏任何细节

**AI 必须做到：**

1. ✅ 严格检查 C1 与 B3 的映射关系
2. ✅ 逐项询问需求的 8 个维度
3. ✅ 完整记录所有细节（背景/规则/边界/性能...）
4. ✅ 分段确认后才写入

---

## C1 的本质：忠实于 B3，不新增范围 + 完整记录所有细节

### ⚠️ 关键原则：C1 是 AODW 的输入源

**C1 必须记录 PM 说的所有内容，包括：**
- 需求的背景和原因
- 业务规则和约束
- 边界情况和异常处理
- PM 的特殊说明和强调
- 实现时的注意事项

**如果 C1 丢失细节，后续 AODW 会出现需求理解偏差！**

---

## Step 1: 严格映射检查

**AI 的第一个问题（必须问）**：

```
AI: "在填写 C1 之前，我需要确认：
     
     C1 只能包含 B3 首版范围内的需求项。
     
     让我先列出 B3 的首版需求：
     [列出 B3 的首版需求]
     
     C1 将基于这些需求展开，不会新增。确认吗？"
```

### AI 必须拒绝新增

```
PM: "对了，还想加一个批量启动功能..."

AI: "⚠️ 请注意：
     
     '批量启动'在 B3 的规划范围内吗？
     
     [检查 B3]
     
     我检查了 B3，没有找到'批量启动'。
     
     根据规范，C 阶段禁止新增规划外需求。
     
     请选择：
     1. 将其放入下一轮 B1 规划
     2. 解冻 B3，重新审视后再冻结
     
     您选择哪个？"
```

---

## Step 2: 逐项细化（完整记录所有细节）

**AI 对每个 B3 需求项的处理方式：**

### 2.1 需求背景和目的

```
AI: "B3 需求项 #1：进度指示器
     
     首先，让我了解背景：
     
     1. 为什么需要这个功能？解决什么问题？
     2. 当前用户遇到了什么困难？
     3. 这个需求对应 A2 中的哪些反馈？
     
     请详细说明，我会全部记录到 C1 中。"
```

### 2.2 需求描述（用户视角）

```
AI: "现在描述需求本身：
     
     1. 用户看到的具体表现是什么？
        - 界面上会出现什么？
        - 用户如何与之交互？
     
     2. 操作流程是怎样的？
        - 第一步？
        - 第二步？
        - 最后一步？
     
     请尽可能详细，这些细节会直接影响后续设计和开发。"
```

### 2.3 核心业务规则

```
AI: "这个需求有哪些业务规则？
     
     例如：
     - 什么情况下显示？什么情况下不显示？
     - 数据如何计算？
     - 时间限制？权限限制？
     
     请逐条说明，我会全部记录。"
```

### 2.4 验收标准（可测试）

```
AI: "如何验证这个需求完成了？
     
     请给出可测试的验收标准：
     - 标准 1：具体要达到什么状态
     - 标准 2：如何验证
     - 标准 3：边界条件
     
     避免模糊表述如'体验好''用户满意'。"
```

### 2.5 边界情况和异常处理

```
AI: "现在考虑边界情况：
     
     1. 网络断开时怎么办？
     2. 数据异常（如为空、过大）时怎么处理？
     3. 并发操作时的表现？
     4. 权限不足时？
     
     请说明每种情况的预期行为，我会记录到 C1。"
```

### 2.6 特殊说明和注意事项

```
AI: "还有什么特殊说明吗？
     
     比如：
     - 性能要求（必须在 X 秒内响应）
     - 兼容性要求（支持哪些浏览器/版本）
     - 与其他功能的交互
     - 实现时的特别注意事项
     
     请补充，我会全部记录。"
```

---

## Step 3: 完整记录示例

**AI 写入 C1 的格式应该是：**

```markdown
### 需求 #1：进度指示器

**需求编号**：REQ-001
**来源**：B3 需求项 #1
**优先级**：P0

---

#### 1. 需求背景

**解决的问题**：
用户在创建 BP 时不知道当前进度，经常中途放弃。根据 A2 反馈
#3、#7、#12，用户表示"不知道还要填多少""填到哪一步了"。

**目标**：
让用户清楚知道当前在第几步，还剩几步，减少放弃率。

**数据支撑**：
- 当前创建放弃率 40%
- 期望降至 10% 以下

---

#### 2. 需求描述

**用户视角**：
1. 用户进入 BP 创建流程时，页面顶部显示进度条
2. 进度条显示：当前步骤 / 总步骤数（如"第 2 步，共 5 步"）
3. 已完成步骤显示绿色，当前步骤高亮，未完成步骤灰色
4. 每完成一步，进度条自动前进

**操作流程**：
1. 用户点击"创建 BP"按钮
2. 系统展示进度条（初始：第 1 步，共 5 步）
3. 用户填写第 1 步信息并点击"下一步"
4. 进度条更新为"第 2 步，共 5 步"，第 1 步显示绿色✅
5. 重复直到第 5 步完成

---

#### 3. 核心业务规则

1. **步骤计算规则**：
   - 总步骤数 = 基本信息 + 目标设定 + 关键成果 + 行动计划 + 确认提交 = 5 步
   - 如果用户跳过"关键成果"（选填），总步骤数调整为 4 步

2. **显示规则**：
   - 进度条始终显示在页面顶部固定位置
   - 在移动端缩小为圆形进度环（显示"2/5"）

3. **保存规则**：
   - 进度随自动保存同步更新
   - 用户退出后再进入，进度条恢复到上次位置

---

#### 4. 验收标准

- [ ] **标准 1**：进入创建流程，立即显示进度条"第 1 步，共 5 步"
- [ ] **标准 2**：点击"下一步"，进度条正确更新到"第 2 步"
- [ ] **标准 3**：已完成步骤显示绿色✅，当前步骤高亮，未完成步骤灰色
- [ ] **标准 4**：跳过选填步骤时，总步骤数正确调整
- [ ] **标准 5**：退出后再进入，进度条恢复到上次保存的位置
- [ ] **标准 6**：移动端显示圆形进度环

---

#### 5. 边界情况处理

1. **网络断开**：
   - 进度条显示本地缓存的进度
   - 顶部显示"离线模式"提示

2. **数据异常**：
   - 如果获取不到步骤数，默认显示"进行中..."
   - 不阻塞用户继续操作

3. **并发编辑**：
   - 如果多人同时编辑同一 BP（极少见），以最后保存为准
   - 进度条显示当前用户的进度

4. **权限变更**：
   - 如果创建过程中权限被收回，进度条置灰
   - 显示提示"您已无权限继续创建"

---

#### 6. 非功能需求

**性能要求**：
- 进度条更新必须在 100ms 内完成（用户无感知延迟）

**兼容性要求**：
- 支持 Chrome 90+、Safari 14+、Edge 90+
- 移动端支持 iOS 13+ 和 Android 9+

**无障碍要求**：
- 进度条必须有 ARIA 标签，支持屏幕阅读器

---

#### 7. 特殊说明

**PM 强调**：
- 进度指示器是 CSF（关键成功因素），必须在首版实现
- 设计时参考"飞书文档创建"的进度条样式
- 不要做太炫酷的动画，简洁优先

**与其他功能的关联**：
- 依赖"自动保存"功能（REQ-005）
- 需要与"断点续作"（REQ-003）联动

**技术注意事项**：
- 前端需要状态管理来追踪当前步骤
- 后端需要提供"获取当前进度"API

---

#### 8. 附加信息

**来源追溯**：
- B3 需求项 #1
- A2 用户反馈 #3、#7、#12

**讨论记录**：
- PM 在 2025-12-19 讨论中强调必须支持移动端
- 设计团队建议采用固定顶部方案

---
```

---

## Step 4: 确保完整性 - AI 检查清单

**AI 在写入每个需求前必须检查：**

```
AI: "让我检查需求 #1 的完整性：
     
     ✅ 完整性检查：
     - [ ] 需求背景已记录（为什么要做）
     - [ ] 需求描述已记录（做什么）
     - [ ] 业务规则已记录（怎么做）
     - [ ] 验收标准已记录（如何验证）
     - [ ] 边界情况已记录（异常处理）
     - [ ] 非功能需求已记录（性能/兼容性）
     - [ ] PM 特殊说明已记录（重点/注意事项）
     - [ ] 来源可追溯（到 B3）
     
     缺失项：[列出缺失的]
     
     请补充缺失的信息。"
```

---

## Step 5: 分段写入 C1

**每确认 1 个需求的完整信息，就写入一次：**

```
AI: "需求 #1 的所有细节已确认完整。
     
     我现在写入 C1，包括：
     - 背景和目的
     - 详细描述
     - 业务规则
     - 验收标准
     - 边界情况
     - 非功能需求
     - 您的特殊说明
     
     [执行写入]
     
     已写入。请检查此需求是否完整准确。"

PM: [确认]

AI: "确认。继续细化需求 #2..."
```

---

## ⚠️ AI 绝对禁止在 C1 中

1. ❌ 只写标题和简单描述，丢失 PM 说的细节
2. ❌ 省略业务规则或边界情况
3. ❌ 不记录 PM 的特殊强调
4. ❌ 验收标准太模糊（如"体验好"）
5. ❌ 不记录需求背景和原因

---

## ✅ AI 必须在 C1 中做到

1. ✅ 完整记录 PM 阐述的所有内容
2. ✅ 8 个维度都填写完整（背景/描述/规则/验收/边界/性能/说明/追溯）
3. ✅ 确保后续 AODW 能直接使用这些信息
4. ✅ 每个细节都不遗漏
5. ✅ 结构化整理，而非杂乱的对话记录

---

## 🔄 C1 完成后的下一步

```
AI: "C1_版本需求清单已完成。
     
     统计：
     - 总需求项：[N] 个
     - 已细化：[N] 个
     - 平均完成度：100%
     
     检查清单：
     - [✓] 所有需求都有完整的 8 个维度
     - [✓] 所有验收标准都可测试
     - [✓] 所有边界情况都已说明
     - [✓] PM 的特殊说明都已记录
     
     下一步：
     1. 执行 R2 版本审视
        运行：prd review r2
     
     2. 或者先修改 C1
        如需修改，请告诉我要调整的需求
     
     您选择哪个？"
```

---

## 📋 C1 需求的 8 个维度

为确保完整性，每个需求必须包含：

1. **需求背景** - 为什么要做，解决什么问题
2. **需求描述** - 用户视角的详细说明
3. **业务规则** - 业务逻辑和约束
4. **验收标准** - 可测试的完成标准
5. **边界情况** - 异常处理和特殊场景
6. **非功能需求** - 性能、兼容性、安全等
7. **特殊说明** - PM 强调和注意事项
8. **附加信息** - 来源追溯、讨论记录

---

**记住：C1 是产品需求的最终形态，是交付给后续所有环节（AODW/研发/测试）的唯一依据！**
