# PRD 需求变更检查工作流

**核心原则**：C 阶段禁止新增规划外需求！

---

## 🛡️ 铁律：C1 必须忠实于 B3

### C1 阶段允许：
- ✅ 将 B2/B3 中的需求细化为具体验收标准
- ✅ 补充技术细节和边界情况
- ✅ 拆分大需求为小需求（仍在原范围内）

### C1 阶段禁止：
- ❌ 新增 B3 中没有的功能
- ❌ 扩展需求范围
- ❌ "顺手加戏"

---

## 🚨 触发检查的信号词

当 PM 说以下话时，AI 必须检查是否是新增需求：

| PM 说的话 | 触发检查 |
|----------|---------|
| "我还要加一个需求" | ✅ 必须检查 |
| "对了，还需要..." | ✅ 必须检查 |
| "另外还有一个功能..." | ✅ 必须检查 |
| "顺便把...也做了" | ✅ 必须检查 |
| "能不能再加一个..." | ✅ 必须检查 |
| "我想到一个新的..." | ✅ 必须检查 |

---

## 📋 AI 检查流程

### 当检测到可能是新增需求时：

**第1步：暂停并确认**
```
AI: "您提到的'批量启动'功能，我需要确认一下：
     这个功能在 B3 冻结的规划中吗？"
```

**第2步：检查 B3**
```
AI: [读取 B3 文件]
    "我检查了 B3_规划冻结归档.md，
     在规划范围中没有找到'批量启动'相关内容。"
```

**第3步：提示违规**
```
AI: "⚠️ 根据规范，这是一个规划外的新增需求。
     C1 阶段禁止引入 B3 范围外的功能。"
```

**第4步：提供选择**
```
AI: "如果要加入这个需求，您有两个选择：
     1. 将其放入下一轮迭代（推荐）
     2. 解冻 B3，重新审视后再冻结
     
     请问您要如何处理？"
```

---

## ✅ 正确的对话示例

### 场景：PM 要求新增需求

```
PM: "需求 #1.4 正确，但是我还要加一个批量启动功能"

AI: "⚠️ 请注意检查：'批量启动'是否在 B3 规划范围内？
     
     我检查了 B3，没有找到'批量启动'相关规划。
     
     根据规范，C1 禁止新增规划外需求。
     
     选项：
     1. 将'批量启动'记录到下一轮规划
     2. 解冻 B3，走 R1 审视流程
     
     如果确认这是 B3 遗漏的，请告诉我在 B3 的哪个位置，
     我来核实一下。"
```

### 如果 PM 坚持要加：

```
PM: "我就是要加这个"

AI: "理解。但这违反了我们的规范。
     
     我可以帮您：
     1. 先完成当前 C1（不含新需求）
     2. 单独记录这个新需求到下一轮 B1
     
     或者，您可以决定解冻 B3，重走流程。
     
     但我不能在 C1 中直接加入规划外需求。
     这是为了保护规划的一致性。"
```

---

## 📝 如果确实是 B3 遗漏

### 如果 PM 说"B3 里有，你没看到"：

```
AI: "好的，请告诉我具体在 B3 的哪个部分？
     我来重新确认一下。"
     
[重新检查 B3]

# 如果确实有：
AI: "您说得对，在 B3 第 X 部分确实提到了相关内容。
     抱歉我之前遗漏了。我们继续细化这个需求。"

# 如果确实没有：
AI: "我仔细检查了 B3，确实没有找到。
     可能是规划时遗漏了。
     要加入的话需要走解冻流程。"
```

---

## ⚠️ 不是所有"补充"都是新需求

### 这些是允许的补充：

- ✅ 细化验收标准（"启动时校验必填项" → 具体哪些必填）
- ✅ 补充边界情况（"如果网络断开怎么办"）
- ✅ 明确交互细节（"弹窗还是 toast"）

### 这些是禁止的新增：

- ❌ 新功能（"加一个批量启动"）
- ❌ 扩展范围（"不只是目标，关键成果也要"）
- ❌ 新的业务逻辑（"再加一个审批流程"）

---

## 🔧 AI 自查问题

在写入 C1 之前，AI 必须自问：

1. **这个需求能在 B3 中找到对应吗？**
2. **我是在细化已有需求，还是在新增功能？**
3. **如果把这个需求删掉，B3 的承诺还能完成吗？**

如果答案是"不能找到"或"在新增"，必须提示 PM！

---

**本工作流确保 C1 忠实于 B3，杜绝"规划外加戏"！**
