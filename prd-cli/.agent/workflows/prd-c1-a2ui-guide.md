---
description: C1 A2UI 界面示意专项指南 (Web Preview 版)
---

# C1 A2UI 界面示意专项指南

**本文档是 prd-c1-requirement-list.md 的补充，专注于界面示意环节的详细指导。**

---

## 🚀 新一代 A2UI 工作流 (Web Preview)

我们已经升级了 A2UI 能力！现在支持通过 `prd ui` 命令在浏览器中实时预览可交互的界面原型。

### 核心机制

1. **AI 生成数据**：AI 根据需求生成标准 JSON 数据。
2. **自动写入**：AI 将数据写入 `.a2ui/current.json` 文件。
3. **实时预览**：用户运行 `prd ui`，CLI 启动本地服务，网页自动读取并渲染界面。

---

## 🛠️ A2UI 标准组件库 (Schema)

为了确保 Web 预览器能正确渲染，AI **必须** 严格遵守以下 Schema。

### 1. 基础结构
```json
{
  "type": "Page",
  "title": "页面标题",
  "children": [ ... ]
}
```

### 2. 布局组件
- **Page**: 根节点
  - `title`: 页面标题 (string)
  - `children`: 子组件数组
- **Row**: 水平布局
  - `children`: 子组件数组
- **Col**: 垂直/列布局
  - `children`: 子组件数组
- **Panel**: 带边框的面板
  - `title`: 面板标题 (可选)
  - `children`: 子组件数组

### 3. 表单与交互组件
- **Input**: 输入框
  - `label`:标签 (string)
  - `placeholder`: 占位符 (string)
- **Button**: 按钮
  - `text`: 按钮文字 (string)
- **Text**: 纯文本
  - `content`: 文本内容 (string)

---

## 📝 交互流程规范

### 第一步：生成并写入预览数据

**当 PM 描述完界面需求后，AI 必须执行：**

1. **构思 JSON 结构**：在思维链中构建符合 Schema 的 JSON。
2. **写入文件**：使用 `write_to_file` 工具将 JSON 写入 `.a2ui/current.json`。
3. **提示预览**：告知 PM 运行命令查看。

**AI 对话示例：**

```
AI: "明白了，这个用户详情页需要包含基本信息表单和操作按钮。

     我已生成 A2UI 预览数据。
     
     👉 请运行命令查看实时预览：
     prd ui
     
     （如果不方便运行命令，您可以看下方的 JSON 结构...）"
```

### 第二步：根据反馈迭代

**当 PM 提出修改意见（如"把按钮移到左边"）时：**

1. **修改 JSON**：调整 `.a2ui/current.json` 中的数据结构。
2. **覆盖写入**：再次使用 `write_to_file` 覆盖原文件。
3. **提示刷新**：告知 PM 刷新浏览器即可看到变化。

---

## 💻 完整示例：用户注册页

### 场景描述
PM: "做一个简单的注册页，要有用户名、密码，下面是注册按钮，右边放个帮助说明。"

### AI 生成的 JSON (写入 .a2ui/current.json)

```json
{
  "type": "Page",
  "title": "用户注册",
  "children": [
    {
      "type": "Row",
      "children": [
        {
          "type": "Col",
          "children": [
            {
              "type": "Panel",
              "title": "填写账户信息",
              "children": [
                { "type": "Input", "label": "用户名", "placeholder": "请输入用户名" },
                { "type": "Input", "label": "密码", "placeholder": "请输入密码" },
                { "type": "Button", "text": "立即注册" }
              ]
            }
          ]
        },
        {
          "type": "Col",
          "children": [
            {
              "type": "Panel",
              "title": "帮助中心",
              "children": [
                { "type": "Text", "content": "密码必须包含字母和数字。" },
                { "type": "Text", "content": "遇到问题请联系客服。" }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

---

## 🚫 AI 避坑指南

1. **不要编造组件**：只能使用 `Page`, `Panel`, `Row`, `Col`, `Input`, `Button`, `Text`。不要用 `Table` (暂不支持), `Chart` 等。
2. **不要忘记写入**：必须调用 `write_to_file`，否则 `prd ui` 读不到数据。
3. **不要只给 JSON**：生成 JSON 的同时，最好也简单描述一下布局，照顾无法运行命令的场景。


---

## 什么是 A2UI

A2UI (Agent-to-User Interface) 是一种让 AI 生成结构化界面描述的方法：
- 使用声明式 JSON 描述界面组件
- 用 ASCII 艺术快速展示布局
- 可选生成高保真图片

**核心价值**：减少 PM、设计、研发之间的沟通成本，避免"我以为你说的是..."。

---

## A2UI 三步流程

### 第一步：快速布局确认（ASCII + JSON）

```
AI: "根据您刚才描述的操作流程，我推导出了一个初步的界面结构。

     **布局草图**：
     ┌─────────────────────────────────────────┐
     │              页面标题                    │
     ├─────────────────────────────────────────┤
     │  [组件A]          │  [组件B]            │
     │                   │                     │
     ├─────────────────────────────────────────┤
     │        [主按钮]        [次按钮]          │
     └─────────────────────────────────────────┘

     **A2UI 结构描述**：
     ```json
     {
       "type": "Page",
       "layout": "SplitView",
       "children": [
         { "type": "Panel", "id": "left" },
         { "type": "Panel", "id": "right" }
       ],
       "footer": [
         { "type": "Button", "text": "主按钮", "style": "primary" }
       ]
     }
     ```

     这个布局是否符合您的预期？有哪些需要调整的地方？"
```

### 第二步：迭代优化（循环直到满意）

```
PM: "组件A 应该放在右边，组件B 放左边"

AI: "好的，我调整一下布局：
     
     ┌─────────────────────────────────────────┐
     │  [组件B]          │  [组件A]            │
     ...
     
     现在是否符合预期？"
```

### 第三步：可选 - 生成高保真图片

```
AI: "布局已确认。是否需要我生成一张高保真的界面示意图？
     
     ⚠️ 注意：复杂界面的图片生成可能需要 30-60 秒。
     
     选择：
     1. ✅ 是，生成图片（适合正式交付）
     2. ⏭️ 跳过，当前 ASCII 草图已足够"
```

---

## 效率对比

| 方式 | 耗时 | 适用场景 |
|-----|------|---------|
| ASCII + JSON | 即时 | 快速对齐认知、迭代修改 |
| 高保真图片 | 30-60秒 | 正式交付、展示给利益相关方 |

---

## 常用 A2UI 组件类型

| 组件 | 类型名 | 说明 |
|-----|-------|------|
| 页面 | `Page` | 顶层容器 |
| 面板 | `Panel` | 区块容器 |
| 表单 | `Form` | 输入表单 |
| 列表 | `List` | 数据列表 |
| 表格 | `Table` | 数据表格 |
| 按钮 | `Button` | 操作按钮 |
| 输入框 | `TextField` | 文本输入 |
| 下拉框 | `Selector` | 选择器 |
| 进度条 | `ProgressBar` | 进度指示 |
| 卡片 | `Card` | 信息卡片 |
| 对话框 | `Dialog` | 弹窗 |
| 提示 | `Toast` | 轻提示 |

---

## 布局类型

| 布局 | 说明 |
|-----|------|
| `SingleColumn` | 单列布局 |
| `SplitView` | 左右分栏 |
| `TopBottom` | 上下分区 |
| `StickyTop` | 顶部固定 |
| `StickyBottom` | 底部固定 |
| `Grid` | 网格布局 |

---

## 完整示例：版本对比看板

### ASCII 草图

```
┌─────────────────────────────────────────────────────────────────┐
│                        版本对比看板                              │
├─────────────────────────────┬───────────────────────────────────┤
│  [▼ 选择基准版本: v1.0.0]   │   [▼ 选择对比版本: v1.1.0]        │
├─────────────────────────────┼───────────────────────────────────┤
│  ✅ REQ-001 登录功能        │   ✅ REQ-001 登录功能              │
│  🔴 REQ-002 旧功能 (已删除)  │   🟢 REQ-002 新功能 (新增)         │
│  ✅ REQ-003 数据导出        │   🟡 REQ-003 数据导出 (已修改)     │
├─────────────────────────────┴───────────────────────────────────┤
│              [导出对比报告]           [返回]                    │
└─────────────────────────────────────────────────────────────────┘
```

### A2UI JSON

```json
{
  "type": "Page",
  "title": "版本对比看板",
  "layout": "SplitView",
  "children": [
    {
      "type": "Panel",
      "id": "left-panel",
      "header": { "type": "Selector", "id": "baseline", "label": "基准版本" },
      "content": { "type": "List", "id": "baseline-list", "highlight": "removed" }
    },
    {
      "type": "Panel",
      "id": "right-panel",
      "header": { "type": "Selector", "id": "compare", "label": "对比版本" },
      "content": { "type": "List", "id": "compare-list", "highlight": "added" }
    }
  ],
  "footer": [
    { "type": "Button", "text": "导出对比报告", "style": "primary" },
    { "type": "Button", "text": "返回", "style": "secondary" }
  ]
}
```

---

## AI 职责清单

1. ✅ **生成 ASCII 布局**：用文本框图快速展示界面结构（即时响应）
2. ✅ **生成 A2UI JSON**：使用声明式 JSON 描述界面组件
3. ✅ **迭代优化**：根据 PM 的反馈实时修改布局
4. ✅ **可选生成图片**：仅在 PM 确认布局后，按需生成高保真视觉稿
5. ✅ **记录到 C1**：将最终确认的 A2UI 结构（和可选的图片链接）保存

---

**参考**：主流程请查看 `prd-c1-requirement-list.md`
