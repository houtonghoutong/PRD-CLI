---
description: 执行 R2 版本审视，确保 IT 文档忠实于规划 (B3)
---

# R2 版本审视工作流

---

## 🚨 本阶段必须遵守的规则

> ⚠️ AI 在执行任务前必须逐条确认以下规则。输出时需包含自检清单。

| ID | 规则 | 严重程度 | 自检 |
|----|------|----------|------|
| G001 | 所有回复必须使用简体中文 | 🔴 严重 | ☐ |
| G002 | 禁止未经对话就填充文档，必须通过提问引导 PM 填写 | 🔴 严重 | ☐ |
| G003 | 禁止替 PM 做决策（优先级/范围/目标由 PM 决定） | 🔴 严重 | ☐ |
| G004 | 禁止'快速完成'跳过流程，每个阶段都要充分对话和审视 | 🔴 严重 | ☐ |
| I001 | 确认一个 IT，立即建立对应的文件夹和文件 | 🔴 严重 | ☐ |
| I002 | 禁止一次性生成所有 IT 文档 | 🔴 严重 | ☐ |
| W001 | 开始工作前，必须查看 .prd-config.json 了解项目状态 | 🟠 高 | ☐ |
| W002 | 开始工作前，必须确认哪些文档已冻结 | 🟠 高 | ☐ |

**自检清单模板**（AI 输出时必须包含）：
```
## ✅ 规则自检 (R2)
- [ ] G001: 所有回复必须使用简体中文...
- [ ] G002: 禁止未经对话就填充文档...
- [ ] G003: 禁止替 PM 做决策...
- [ ] I001: 确认一个 IT，立即建立...
// ...
```

---

本工作流用于执行 R2 版本审视，判断 **IT 用户故事** 是否忠实于 **B3 规划**。

---

## 🛡️ 核心准则：PM 判定，AI 执行

1.  **忠实性审计**：AI 只审计 IT 文档是否偏离了 B3。
2.  **严禁代签**：涉及版本承诺、交付清单、C3 冻结签名时，AI 严禁操作。
3.  **禁止静默通过**：如果 IT 文档超出了规划（B3），AI 必须大声指出。

---

## 🎯 R2 审视的本质：IT vs B3

R2 的核心使命只有一句话：
> **判断 IT 用户故事是否忠实执行了已冻结的规划（B3）**

### 核心思维框架：

```
Step 1: 以终为始 → IT-BIZ 的场景是否符合 B3 目标？
Step 2: 结构化拆解 → B2 的需求项是否都在 IT 中体现？
Step 3: 多维决策 → 构建一致性矩阵评估偏离度
```

---

## 📋 R2 审视的严格标准

### 维度 1：业务场景闭环（以终为始）

**AI 必须审视：**

1.  **目标对齐**
    *   IT-BIZ 中描述的场景，是否服务于 B3 的核心问题？
    *   IT 是否引入了 B3 没提到的新业务目标？

2.  ** Gap 一致性**
    *   B1 识别的 Gap，是否通过 IT 得到了解决？

**一致性矩阵**：

| 项目 | B3 冻结内容 | IT 实际内容 | 一致性 | 问题 |
|-----|-----------|-----------|-------|-----|
| 核心目标 | 优化创建流程 | 优化创建流程 | ✅ | 无 |
| 解决的 Gap | 用户困惑 | 用户困惑 | ✅ | 无 |

### 维度 2：规划范围一致性

**AI 必须用 MECE 原则检查：**

1.  **完整映射检查 (B2 -> IT)**
    *   B2 中的每个需求项，是否都有对应的 IT？
    *   构建映射矩阵：

    | B2 需求项 | 对应 IT | 是否遗漏 |
    |---|---|---|
    | REQ-001 | IT-001 | ✅ |
    | REQ-002 | 无 | ❌ 遗漏！|

2.  **无新增检查 (IT -> B2)**
    *   IT 中是否包含 B2 没有的功能点？
    *   如有，必须确认是否为"细化"而非"新增"。

3.  **来源追溯**
    *   每个 IT-DEV 文档是否明确标注了"来源追溯"？

### 维度 3：验收标准完整性

**AI 必须检查：**

1.  **业务验收**
    *   每个 IT-BIZ 是否都有明确的"业务验收标准"？
    *   是否包含"体验验收"标准？

2.  **可验证性**
    *   标准是否模糊？（❌ "体验好" vs ✅ "3步内完成"）

### 维度 4：细节与边界

**AI 必须检查 IT-DEV：**

1.  **深度检查**
    *   是否有状态流转图？
    *   是否有异常处理（网络失败、数据为空）？

2.  **技术准备度**
    *   是否关联了 RT？
    *   是否引用了 A2UI？

### 维度 5：开发就绪状态

**AI 必须回答：**
*   研发团队拿到这个 IT-DEV，能否直接开始写代码？
*   如果还需要问 PM "这里怎么做"，则视为不通过。

### 维度 6：用户视角审查（关键！）

**AI 必须站在用户角度审视：**

1.  **感知价值**
    *   用户看到这个 IT，能理解它是干什么的吗？
    *   用户会觉得"好用"吗？

2.  **痛点匹配**
    *   这个 IT 真的解决了 A2 中的用户反馈吗？

**AI 审视话术**：
```
AI: "我从用户视角审视 IT-001：

     📊 用户感知分析：
     - 用户第一反应：✅ 能立即理解
     - 使用体验：✅ 直观
     - 满意度预测：高
     
     PM 请确认：是否接受以上用户视角分析？"
```

---

## 🔍 审视执行方法：忠实度矩阵

**AI 必须构建详细的忠实度分析矩阵：**

| B2 需求 | 对应 IT | 优先级 | 验收标准 | 一致性评分 | 问题 |
|--------|--------|-------|---------|----------|-----|
| REQ-001 | IT-001 | P0 | ✅ 清晰 | 100% | 无 |
| REQ-002 | 无 | - | - | 0% | 遗漏了 |
| 无 | IT-002 | - | ⚠️ 模糊 | 0% | 新增未知需求 |

**综合评估**：**不通过（≥85% 才通过）**

---

## 💬 苏格拉底式审视对话

**AI 发现问题时的对话方式：**

```
AI: "我注意到 IT-002 是关于'批量导出'的。
     
     请问，这个功能在 B3 的规划范围中吗？"

PM: "呃...好像没有..."

AI: "B3 冻结的规划目标是'优化单个创建流程'。
     '批量导出'是新增功能，不在 B3 范围内。
     
     根据规范，C 阶段禁止新增规划外需求。
     
     您有两个选择：
     1. 从本次版本中移除 IT-002
     2. 解冻 B3，重新走 R1 审视流程"
```

---

## 📊 最终决策矩阵

**AI 必须输出完整的评估矩阵：**

| 维度 | 权重 | 评分 | 备注 |
|-----|-----|-----|------|
| 业务场景闭环 | 20% | 80% | |
| 规划范围一致性 | 25% | 70% | 有新增需求 |
| 验收标准完整性 | 15% | 90% | |
| 细节与边界 | 10% | 80% | |
| 开发就绪状态 | 10% | 90% | |
| **用户视角审查** | **20%** | 60% | |
| **总分** | 100% | **75.5** | **不通过** |

---

## 🔄 忠实性审计的三问

**AI 在审视时必须反复问自己：**

1.  **"这是基于 B3 的执行，还是重新规划？"**
    *   如果 IT 和 B2 差异 ＞ 10%，这不是执行，是重新规划

2.  **"研发拿到 IT 文档后，会不会说'这和 B3 说的不一样'？"**
    *   如果会，说明偏离了

3.  **"如果 B3 冻结时 PM 知道会变成这样，他还会签字吗？"**
    *   如果不会，说明背叛了承诺
