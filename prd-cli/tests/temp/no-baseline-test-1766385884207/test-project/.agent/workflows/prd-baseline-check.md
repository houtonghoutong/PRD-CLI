# PRD 基线完整性检查工作流

**核心原则**：在开始任何 B 类规划之前，A 类基线必须完整！

---

## 🛡️ 铁律：先有基线，再谈规划

### AI 在开始 B1 讨论之前，必须检查：

1. **A0_产品基础与范围说明.md** 是否存在？
2. **A1_已上线功能清单.md** 是否存在？
3. **A2_存量反馈汇总.md** 是否存在？

**如果任何一个缺失，AI 必须先完成 A 类文档，再开始 B 类讨论！**

---

## 📝 用户输入的归档规则

### 当用户提供"已有功能说明"时：

**AI 必须**：
1. 立即询问："这份功能说明应该归档为 A1_已上线功能清单.md，可以吗？"
2. 获得 PM 确认后，使用 CLI 创建 A1 并写入内容
3. 确保内容被正式归档，而不是只存在于对话中

**正确做法**：
```
PM: "这是我们系统的已有功能清单..."
AI: "感谢！这份内容应该归档为 A1_已上线功能清单.md。
     我现在帮你创建 A1 文档并写入，可以吗？"
PM: "可以"
AI: [执行 prd baseline create A1]
AI: [将用户提供的内容写入 A1]
AI: "A1 已创建并归档！"
```

**错误做法**：
```
PM: "这是我们系统的已有功能清单..."
AI: "好的，那我们来讨论 B1 规划吧..." ❌
# 跳过了归档步骤！
```

---

### 当用户提供"用户反馈"或"问题描述"时：

**AI 必须**：
1. 询问："这些反馈应该归档为 A2_存量反馈汇总.md，可以吗？"
2. 获得确认后创建 A2 并写入

---

## 🔄 开始 B1 讨论前的检查清单

**AI 必须执行以下检查（不可跳过）**：

```
检查项 1: A0 是否存在？
  - 如果否 → 提示 PM："请先创建产品基础文档 A0"
  
检查项 2: A1 是否存在？
  - 如果否 → 询问 PM："您之前提到过已有功能，是否需要我帮您归档为 A1？"
  
检查项 3: A2 是否存在？
  - 如果否 → 询问 PM："目前有收集到的用户反馈吗？需要创建 A2 吗？"

只有以上检查都通过，才能开始 B1 讨论！
```

---

## 📋 完整的项目启动流程

### 对于已有项目的新版本规划：

**第1步：确认基线文档**
```
AI: "我看到这是一个已有项目。让我先检查基线文档是否完整。"
[检查 A0, A1, A2 是否存在]
```

**第2步：补充缺失的基线**
```
AI: "A1（已上线功能清单）缺失。您之前提供的功能说明需要归档为 A1 吗？"
PM: "是的"
AI: [创建 A1 并写入]
```

**第3步：确认基线完整**
```
AI: "基线文档检查完成：
     ✅ A0_产品基础与范围说明.md
     ✅ A1_已上线功能清单.md
     ✅ A2_存量反馈汇总.md
     现在可以开始 B1 规划了。"
```

**第4步：才开始 B1 讨论**

---

## ⚠️ 特别提醒

### 用户提供的任何信息，如果属于以下类别，必须归档：

| 用户提供的信息 | 应归档到 |
|--------------|---------|
| 产品介绍、定位、用户群 | A0 |
| 已有功能列表、功能说明 | A1 |
| 用户反馈、问题描述、数据异常 | A2 |
| 能力边界、技术限制 | A0 |

### AI 绝对禁止：

- ❌ 在对话中讨论了功能，但没有归档到 A1
- ❌ 在对话中讨论了问题，但没有归档到 A2
- ❌ 在 A 类文档不完整的情况下开始 B 类讨论
- ❌ 只是"记住"用户说的，而不正式写入文档

---

## 🔧 CLI 命令提醒

创建 A 类基线文档的命令：
```bash
prd baseline create A0   # 产品基础与范围说明
prd baseline create A1   # 已上线功能清单
prd baseline create A2   # 存量反馈汇总
prd baseline create R0   # 基线审视报告
```

AI 在发现基线缺失时，应主动提示用户使用这些命令。

---

**本工作流是 PRD 流程的根基，AI 代理必须严格遵守！**
